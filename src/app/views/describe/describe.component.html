<ng-container>
  <div class="row">
    <div class="col d-flex">
      <mat-form-field appearance="outline" class="flex-grow-1">
        <mat-label>Interface</mat-label>
        <mat-select [disabled]="selectedInterface.valid" [formControl]="selectedInterface">
          <mat-option *ngFor="let interface of interfaces" [value]="interface">
            {{interface.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <h3>JsonLD Editor â€“ Edit JsonLD context here
        <mat-icon class="mx-2" matTooltip="Only enter the JsonLd context without the enclosing @context">
          info
        </mat-icon>
      </h3>

      <app-editor-zone leftHeading="Request Context" rightHeading="Response Context"
        [leftData]="selectedInterface.value?.request.jsonLdContext"
        [rightData]="selectedInterface.value?.response.jsonLdContext"
        (saveLeft)="save($event, selectedInterface.value, selectedInterface.value?.request)"
        (saveRight)="save($event, selectedInterface.value, selectedInterface.value?.response)">
      </app-editor-zone>
    </div>
  </div>
  <div class="row mt-5">
    <div class="col">
      <mat-accordion multi="true">
        <mat-expansion-panel [disabled]="!selectedInterface.valid" [expanded]="selectedInterface.valid">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <b>Interface overview</b>
            </mat-panel-title>
            <mat-panel-description>
              Inspect the selected interface
            </mat-panel-description>
          </mat-expansion-panel-header>

          <div class="pt-2">
            <div class="row">
              <div class="col-4 border-right">
                <mat-tree [dataSource]="leftDataSource" [treeControl]="leftTreeControl" class="mat-tree">
                  <!-- Leaf nodes -->
                  <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
                    <li class="mat-tree-node">
                      <mat-icon></mat-icon>
                      <div class="px-3">{{node.name}}</div>
                    </li>
                  </mat-tree-node>
                  <!-- Expandable nodes -->
                  <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                    <li>
                      <div class="mat-tree-node">
                        <mat-icon>
                          {{leftTreeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                        </mat-icon>
                        <button mat-button matTreeNodeToggle>{{node.name}}</button>
                      </div>
                      <ul [class.mat-tree-invisible]="!leftTreeControl.isExpanded(node)">
                        <ng-container matTreeNodeOutlet></ng-container>
                      </ul>
                    </li>
                  </mat-nested-tree-node>
                </mat-tree>
              </div>
              <div class="col-4">
              </div>
              <div class="col-4 border-left">
                <mat-tree [dataSource]="rightDataSource" [treeControl]="rightTreeControl" class="mat-tree">
                  <!-- Leaf nodes -->
                  <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
                    <li class="mat-tree-node">
                      <mat-icon></mat-icon>
                      <div class="px-3">{{node.name}}</div>
                    </li>
                  </mat-tree-node>
                  <!-- Expandable nodes -->
                  <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                    <li>
                      <div class="mat-tree-node">
                        <mat-icon>
                          {{rightTreeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                        </mat-icon>
                        <button mat-button matTreeNodeToggle>{{node.name}}</button>
                      </div>
                      <ul [class.mat-tree-invisible]="!rightTreeControl.isExpanded(node)">
                        <ng-container matTreeNodeOutlet></ng-container>
                      </ul>
                    </li>
                  </mat-nested-tree-node>
                </mat-tree>
              </div>
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </div>
  <div class="row mt-5">
    <div class="col">
      <button mat-raised-button color="warn" [disabled]="!selectedInterface.valid" (click)="reset()">Reset</button>
      <button mat-raised-button color="accent" class="float-right"
        [disabled]="!selectedInterface.valid" (click)="finish()">Finish</button>
    </div>
  </div>
</ng-container>
